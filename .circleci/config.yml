# CircleCI config file to build node spk package

version: 2

# make arch-$SYNOARCH always return exit code 0.
# The "ls" line is to test if SPK has been build.

jobs:
  build:
    machine:
      image: ubuntu-1604:201903-01
    steps:
      - checkout
      - run: docker build -t spksrc-node .
      - run: docker run -it -v `pwd`:/spksrc spksrc-node /bin/bash -c "cd /spksrc && make setup && cd spk/node && make all-supported"
      - run: ls -l packages/*.spk

